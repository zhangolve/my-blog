title:     Chrome浏览器下使用SwitchyOmega配合SSR客户端代理问题
date: 2016-05-30 21:09:49 
categories: 网络
tags: [科学上网] 
description: 

---
# 问题来源

在过去的一年多的时间里，在科学上网方面，在PC端我的方法一直是使用Firefox(or Chrome)+插件+SS客户端

使用的SS也是我一年半以前从搬瓦工网站上买到的3.99刀/年的72M RAM的vps搭建的，这个vps勉强能用，也凑合着用了一年多了，但是最近觉得越来越难以接受了，并不是我的要求高了，而是它的状况越来越差了，本来打算是安装FinalSpeed的，但是看了看教程，明确的提到了对于搬瓦工的VPS至少要求256M的RAM，所以也就没戏了。
<!--more-->
我自己是知道在哪里能够搞到价格比较合理的SS帐号的，于是就找了找，看到一个价格还算公道，便先是使用，后来就索性买了一年的。

# 问题

## ShadowsocksR

对方提供给我SS配置推荐使用的是ShadowsocksR客户端，

还要设置

	协议模式：auth_sha1
	混淆模式：tls1.2_ticket_auth

我以前一直用的都是Shadowsocks原作者clowwindy 开发的官方客户端，后来即便是他已经被请喝茶，也还是因为比较稳定而一直在用，但是既然对方这样推荐便从网络上找到了SSR客户端。目前的最新版本应该是3.8.1.0，配置的方式也很简单，不过，除了之前的ss客户端都需要配置的ip 地址，服务器端口，密码，加密方式之外，还需要配置的是上面提到的协议模式和混淆模式，我后来测试，如果这两个模式设置不正确，也是不能够顺利启动科学上网的。



在Firefox 浏览器上使用AutoProxy 还算比较顺利，我大多数时候是使用Firefox的，但是偶尔也会使用Chrome，因此还是想配置好Chrome，最初我使用的是SwitchSharp,还是按照以往的默认配置，结果一直是不能连接网页。后来索性更新AutoProxy 到SwitchOmega，但是还是不可以。

# 解决办法

我一开始一直是使用的SO的全局代理模式，代理协议也和以前一样选择的是socks 5，后来因为这样不行，试了试socks 4，结果能够连接网络，但是网速很慢。

由于我已经在SSR客户端的配置中勾选了系统代理，后来就干脆在SO的选项里面选择了系统代理模式，这好像是之前的Switchsharp 所没有的一个模式，结果选择这个模式之后，在地址栏敲击google.com ,发现网页秒开了。

Excited

后来，我很好奇为什么用系统代理模式反倒是能够连接网络了，于是上网搜索。果然，看到了一些switchyomega的issues，也给了我一些参考。

https://github.com/feliscatus/switchyomega/issues/581
https://github.com/FelisCatus/SwitchyOmega/issues/557

发现这不光和socks 5有关系，还因为我的电脑系统是win 10，解决办法是

- 直接使用系统代理模式，由SSR客户端的配置来实现自动代理

- 使用SO的代理模式时，在代理协议中选择HTTP，而不是SOCKS 5. 

# 题外话 

SSR客户端并不是clowwindy 开发的，但是这个客户端的功能却比原官方客户端更为丰富。简单说几点它的优点：

- 如前所说，加入了混淆模式、协议模式等，让ss代理更加安全，作者也在他的[博客上这样说](http://breakwa11.blogspot.jp/2016/03/shadowsocksr.html) ：
>另外，我发现其实现在的GFW完全有能力封杀SS原版协议，但却只在少数地区这么做，不知道出于什么原因。而SSR现在由于多了协议和混淆选项，配置相对更麻烦，用户数少得多，并且因为混淆更难被封杀也容易骗过QOS，即使不维护也应该能使用到房价跌到谷底，直到爆发全国大范围断网为止。

- 加入了流量统计功能

这一点我是在之前的SS官方客户端上面看到的，我知道SS的android客户端早就已经实现了这个功能，但是PC端的话，我这还是第一次见到。
![](http://7ktu2f.com1.z0.glb.clouddn.com/SSRflow.png)

- 扫描屏幕上的二维码
 这其实并不是什么新功能了，只是因为我以前配置完一个帐号之后就不再管了，这次为了设置这个SSR特地观察了一下，一看有这个功能觉得确实很实用。

# 总结

实在是很久没有关注所谓「科学上网」 这一块的东西了，好像发展也是「日新月异」啊，那位朋友跟我讲SSR，我甚至都没有听说过。至于ios 端的什么shadowrocket以及surge 等，倒也是听说过的，只是我自己毕竟用的Android机，所以也就没关注，不过还是能够看出来发展之快的。而为什么发展这么快呢？相比也是道高一尺，魔高一丈吧！


